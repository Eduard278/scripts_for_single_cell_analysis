Mammary T cells (CD45+CD90.2+, TCRb+ PLACEHOLDER) from nulliparous,  pregnant (G18.5), and lactating (L5) mice were sorted from samples labeled with TotalSeqC hashtags antibodies (Biolegend) using a Sony MA900 sorter. Sorted cells were pooled and PLACEHOLDER cells per lane (total of p lanes) were loaded on a Chromium Single Cell Controller (10X Genomics) to encapsulate the cells into droplets. The gene expression (GEX),  hashtag oligonucleotide (HTO) and VDJ (TCR) sequencing libraries were prepared using Chromium Single Cell 5’ v2 reagent kits following the manufacturer’s instructions, and sequenced on an Illumina Nextseq1000 platform (NextSeq 1000/2000 P2 reagents (100 cycles)).
The initial processing of the expression data involved generating fastq files and count matrices using Cell Ranger (57) v7.1.0 (10X Genomics, Pleasanton, CA) that was run with the “Include introns=True” option and the mm10-2020-A transcriptome reference. The TCR data was processed with Cell Ranger v7.1.0 using a VDJ reference based on the IGMT database: The IGMT reference was generated with Cell Ranger v7.1.0 using the 'fetch-imgt' and 'cellranger mkvdjref' functions. Processing of the expression data was performed with the 'cellranger multi' and 'cellranger aggr' functions. After processing and aggregation, the estimated number of cells and mean reads per cell for each library were as follows: 114629 estimated number of cells, 21832 mean reads per cell (from eight GEX libraries), 543 Median hashtag UMIs per Cell (across eight HTO libraries), 66544 cells with a productive V-J spanning TRA and TRB pair (from eight VDJ libraries).
The overall sequencing quality was high in the eight mRNA libraries: >94% of bases in the barcode and UMI regions had Q30 (99.99% inferred base call accuracy) quality score or above, whereas >90% of bases in the RNA reads had Q30 or above. Furthermore, across the eight GEX libraries the median gene count range was 564-955, the sequencing saturation ranged between 63-71%, and 68-71% of the reads mapped confidently to the transcriptome. Across the eight TCR libraries, the mean used reads per cell was 191-919 (average 655). Across the eight hashtag (HTO) libraries the mean antibody reads usable per cell was 161-945 (average 635).
In the downstream analysis of the expression data, the Cell Ranger aggregation output (filtered_feature_bc_matrix directory) was loaded into Seurat version 4.4.1 (58) using the CreateSeuratObject function with min.cells=3. For filtering out low-quality cells, we established minimum thresholds for gene (nCount_RNA > 1000) and UMI counts (nFeature_RNA > 300), and a maximum threshold for percentage mitochondrial content (percent.mt < 6) based on visual inspection of the corresponding metric distributions across all cells. Log-normalization (LogNormalize function) of the RNA count data and centered log-ratio transformation (CLR) of the HTO count data were carried out using the NormalizeData function. For HTO demultiplexing cells into the individual mice within nulliparous/pregnant/lactation groups and removing any doublets, HTODemux was run with a positive quantile = 0.99. The top 2000 variable features were determined with the VariableFeatures function, expression data was scaled with ScaleData, and dimensionality reduction was performed with the RunPCA  function on the variable features, followed by determining the dimensionality of the dataset on an elbow plot (ElbowPlot function), which was determined to be 60. Subsequently, FindNeighbors, FindClusters, and RunUMAP were run on 60 dimensions and a range of resolutions to determine the optimal resolution that captures biological diversity in the dataset, which was determined to be 0.25, resulting in 16 clusters. The clusters identified by the FindClusters function of Seurat (default Louvain clustering setting and 0.25 resolution) were further annotated using cell type-specific markers.
TCR repertoire sequencing data were analyzed with the scRepertoire package v2.0.0 (59) in R v4.4.1. Starting with the filtered contig annotations output table from 'cellranger aggr', the createHTOContigList, combineTCR, and combineExpression functions were used for combining the TCR data from each sample and for integration of the combined TCR data with the Seurat object. We utilized the amino acid sequence of the paired CDR3 regions of the alpha and beta chains as the clonotype definition. T cell repertoire diversity was estimated using the D50 metric, which was calculated in R as the fraction of clonotypes, ordered by abundance, which account for 50 percent of total TCR sequences (defined as paired aminoacid CDR3 sequences). Clonotype size was defined at the level of each biological replicate (Rare: between 0% and 0.01%, Small: between 0.01% and 0.1%, Medium: between 0.1% and 1%, Large: between 1% and 10%, Hyperexpanded: between 10% and 100%). Cells with a putative iNKT TCR were defined as containing a TRAV11-TRAJ18 alpha chain V gene usage, while cells with a putative MAIT TCR were defined as containing a TRAV1-TRAJ33 alpha chain V gene usage. TCR overlap between clusters or between mice was defined at the level of the CDR3 amino acid region for the combined alpha and beta chains, and visualized using the package circlize (PMID: 24930139).
For pseudobulk analysis, the raw counts were aggregated across cells for each biological replicate on the indicated clusters using AggregateExpression. Genes with a very low level of expression across biological replicates, less than 10 total counts across all samples, were filtered from the dataset. Differential gene expression analysis was performed using DESeq2 v1.44.0 (PMID: 25516281), using default parameters, and not including a log2 fold change shrinkage step. The normalized counts were extracted from the DESeq2 object and used for visualization along be corresponding adjusted p-values and log2 fold changes. Pathway enrichment analysis of upregulated or downregulated genes was performed using Metascape (PMID: 30944313).
The trajectory and gene set signature enrichment analyses at the single cell level were performed with the R packages Slingshot (v2.2.0) (60) and UCell (2.8.0) (61), respectively. 
NEED TO INCLUDE TABLE WITH GENES DEFINING THESE SIGNATURES.

Single-cell RNA sequencing of mammary epithelial and myoepithelial cells
For mammary epithelial and myoepithelial scRNA-seq, thymic IELp (CD1d-tetramer–CD4–CD8α–TCRβ+CD5+CD122+H-2Kb+PD-1+) were adoptively transferred (+IELp) or not (-IELp) into pregnant Rag2-/-c-/- /- at day 10.5 of gestation. Mammary epithelial cells and myoepithelial cells (CD45-CD31-EPCAM+) from Rag2-/-c-/- mice with or without IELp were sorted 8 days post-transfer (G18.5) from samples labeled with TotalSeqC hashtags antibodies (Biolegend) with a Sony MA900 sorter. Sorted cells were pooled together and 45,000 cells were loaded to a Chromium Single Cell Controller (10X Genomics) to encapsulate the cells into droplets (1 lanes). The gene expression (GEX) and hashtag oligo (HTO) sequencing libraries were prepared using a Chromium Single Cell 5’ v2 reagent kits following the manufacturer’s instructions and sequenced on an Illumina Nextseq2000 platform (NextSeq 1000/2000 P3 reagents (200 cycles)) with the following total read counts: 269 million (1 GEX library), 47 million (1 HTO library).
Sequencing data was demultiplexed using the bcl-convert tool from llumina and processed using the Cell Ranger (57) (v.7.1.0) (10X Genomics Pleasanton, CA) cellranger multi-function, which was run with the default 'Include-introns=True' option. After running cellranger multi 11230 cells were captured with the following metrics. For the gene expression library: 9987 median reads per cell, 23939 mean reads per cell, 1261 median genes per cell, and 3271 median UMI counts per cell. For the HTO library: 348 median UMI counts per cell, 1096 mean antibody reads usable per cell, 4202 mean reads per cell. The transcriptome reference was mm10-2020-A. The overall sequencing quality was high: >94% of bases in the barcode and UMI regions had Q30 (99.99% inferred base call accuracy) quality score or above, whereas >91% of bases in the RNA reads had Q30 or above. Furthermore the sequencing saturation was 59.5% and 77.4% of the reads mapped confidently to the transcriptome. 
Downstream analyses were performed with Seurat v.4.4.0 (Hao2021) with the parameters described below. CreateSeuratObject was run with min.cells=3. Low quality cells were filtered with the following thresholds for gene counts, UMI counts, and percentage mitochondria:  500 < nFeature_RNA < 6000, nCount_RNA < 30000, percent.mt <7, with 6009 cells remaining. The RNA count data was normalized with the LogNormalize method, while the HTO count data was normalized with the CLR method. HTO count data were used to demultiplex mice and to identify doublets (63) with the HTODemux function with the parameter positive.quantile = 0.99. 2400 cells were classified as singlets and used for downstream analyses. FindVariableFeatures (nFeatures=2000) was run, data was scaled with ScaleData,  RunPCA was run (npcs=100) and the top 35 dimensions were used to run FindNeighbors, FindClusters (with a range of resolutions and a final chosen resolution of 0.25), and RunUMAP.The resulting clusters were manually annotated using cell type specific markers. Contaminating clusters comprised of immune, endothelial, and fibroblast cells were removed, while clusters of interest comprised of basal cells, epithelial cells, and putative stem cells were retained. On this subset of cells FindVariableFeatures (nFeatures=2000) was run, data was scaled with ScaleData, RunPCA was run (npcs=100) and the top 28 dimensions were used to run FindNeighbors, FindClusters (with a range of resolutions and a final chosen resolution of 0.6), and RunUMAP. The resulting clusters were manually annotated using cell type specific markers.

For pseudobulk analysis, the raw counts were aggregated across cells for each biological replicate on the indicated clusters using AggregateExpression. Genes with a very low level of expression across biological replicates, less than 10 total counts across all samples, were filtered from the dataset. Differential gene expression analysis was performed using DESeq2 v1.44.0 (PMID: 25516281), using default parameters, and not including a log2 fold change shrinkage step. The normalized counts were extracted from the DESeq2 object and used for visualization along be corresponding adjusted p-values and log2 fold changes. Pathway enrichment analysis of upregulated or downregulated genes was performed using Metascape (PMID: 30944313).

